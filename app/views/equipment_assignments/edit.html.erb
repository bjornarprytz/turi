<% content_for :page_title do %>
    | <%= @equipment_list.name %> | <%= @equipment_item.name %>
<% end %>


<%= render 'equipment_lists/sidebar' %>

<div class="col-md-offset-3 col-md-6 text-center">
    <div class='block'>
        <!-- Form for eqequipment assigment -->
            <%= form_for [@trip, @equipment_list, @equipment_item, @equipment_assignment] do |f| %>
                <!-- 
                    if the current_user is authorized, he/she can add assigments for other people
                    It's done by adding the email for the participant into the field, if the field is blank it's assigned to current_user
                -->
                <% if policy(@trip).update? %>
                    <%= text_field_tag(:user_email, '', class: 'form-control') %>
                <% end %>

                <!-- begin selector -->
                <select id="equipment_assignment_number" name="equipment_assignment[number]" class="select-select2" style="width: 100%;" data-placeholder="Choose one..">
                    <option></option><!-- Required for data-placeholder attribute to work with Select2 plugin -->
                    <% 1.upto(@equipment_item.number - @equipment_item.equipment_assignments.sum(:number) + @equipment_assignment.number) do |n| %>
                        <option value="<%= n %>"><%= n %></option>
                    <% end %>
                </select>
                <!-- end Selector -->

                <div class="form-group form-actions">
                    <%= f.submit class: 'btn btn-effect-ripple btn-primary', id: 'submit' %>
                </div>
            <% end %>
    </div>
</div>
