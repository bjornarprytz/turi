<% content_for :page_class do %>
    no-page-padding
<% end %>

<% content_for :page_scripts do %>
    <script>
      var map;
        $(function () {

            // Resize the map with window changes.
            $(window).resize(function() {
                $('#map').css('height', $('#page-content').outerHeight() - $('.navbar').outerHeight());
            });

            $('#map').css('height', $('#page-content').outerHeight() - $('.navbar').outerHeight());

            // Initialize the map.
            var markerIcon = L.icon({
                iconUrl: '<%= asset_path 'map/markers/regroup.png' %>',
                iconSize: [32, 37]
            });

            map = L.map('map').setView([51.505, -0.09], 4);
            L.tileLayer( 'http://{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="http://osm.org/copyright" title="OpenStreetMap" target="_blank">OpenStreetMap</a> contributors | Tiles Courtesy of <a href="http://www.mapquest.com/" title="MapQuest" target="_blank">MapQuest</a> <img src="http://developer.mapquest.com/content/osm/mq_logo.png" width="16" height="16">',
                subdomains: ['otile1','otile2','otile3','otile4']
            }).addTo( map );
            map.invalidateSize();

            <% @trip_items.each do |trip_item| %>
                L.marker([<%=trip_item[:lat]%>, <%=trip_item[:long]%>], {icon: markerIcon}).addTo(map);
            <% end %>

        });
    </script>
<% end %>

<div id="map" class="gmap explore-map"></div>